import{_ as n,o as a,c as l,S as p}from"./chunks/framework.d5a27ec8.js";const o="/fe-series-notes/assets/image_5RVperOIYB.533e77fc.png",e="/fe-series-notes/assets/image_vH7DRJAsud.697093a4.png",t="/fe-series-notes/assets/image_UD9_XHXV7b.f410dc9a.png",c="/fe-series-notes/assets/image_prReBAXID3.9b388fb7.png",r="/fe-series-notes/assets/image_jkcYGNwcVh.a2d9d9e7.png",E="/fe-series-notes/assets/image_JfG7KnG_I0.ecea7812.png",i="/fe-series-notes/assets/image_7KxziFpcgL.c1504b79.png",y="/fe-series-notes/assets/image_CiICfCZGcc.23c294c0.png",d="/fe-series-notes/assets/image_ccBVaxt7XQ.58fdb6dd.png",v=JSON.parse('{"title":"Sentry å…¥é—¨ä¸å®è·µ","description":"","frontmatter":{},"headers":[],"relativePath":"engineer/monitor/Sentryå…¥é—¨ä¸å®è·µ.md","filePath":"engineer/monitor/Sentryå…¥é—¨ä¸å®è·µ.md","lastUpdated":1715160445000}'),u={name:"engineer/monitor/Sentryå…¥é—¨ä¸å®è·µ.md"};function F(g,s,m,h,b,B){return a(),l("div",null,s[0]||(s[0]=[p(`<h1 id="sentry-å…¥é—¨ä¸å®è·µ" tabindex="-1">Sentry å…¥é—¨ä¸å®è·µ <a class="header-anchor" href="#sentry-å…¥é—¨ä¸å®è·µ" aria-label="Permalink to &quot;Sentry å…¥é—¨ä¸å®è·µ&quot;">â€‹</a></h1><h2 id="å‰ç«¯ç›‘æ§æ¦‚è¿°" tabindex="-1">å‰ç«¯ç›‘æ§æ¦‚è¿° <a class="header-anchor" href="#å‰ç«¯ç›‘æ§æ¦‚è¿°" aria-label="Permalink to &quot;å‰ç«¯ç›‘æ§æ¦‚è¿°&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯å‰ç«¯ç›‘æ§" tabindex="-1">ä»€ä¹ˆæ˜¯å‰ç«¯ç›‘æ§ï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å‰ç«¯ç›‘æ§" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯å‰ç«¯ç›‘æ§ï¼Ÿ&quot;">â€‹</a></h3><p>å‰ç«¯ç›‘æ§æ˜¯æŒ‡é€šè¿‡ç›‘æµ‹ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºçš„å‰ç«¯æ€§èƒ½æ•°æ®ï¼Œæ¥äº†è§£ç”¨æˆ·åœ¨å…¶ä½¿ç”¨è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜å’Œç“¶é¢ˆï¼Œå¹¶åŠæ—¶å‘ç°å’Œè§£å†³è¿™äº›é—®é¢˜ã€‚</p><p>å‰ç«¯ç›‘æ§é€šå¸¸åŒ…æ‹¬ï¼š</p><ul><li>é”™è¯¯ç›‘æ§ï¼šJavaScript é”™è¯¯ä»¥åŠç½‘ç»œè¯·æ±‚é”™è¯¯ç­‰</li><li>æ€§èƒ½ç›‘æ§ï¼šç›‘æ§é¡µé¢åŠ è½½æ—¶é—´ã€é¡µé¢æ¸²æŸ“æ—¶é—´ã€ç”¨æˆ·äº¤äº’æ—¶é—´ã€æµè§ˆå™¨å¡é¡¿æƒ…å†µç­‰</li></ul><h3 id="å‰ç«¯ç›‘æ§çš„ä½œç”¨" tabindex="-1">å‰ç«¯ç›‘æ§çš„ä½œç”¨ <a class="header-anchor" href="#å‰ç«¯ç›‘æ§çš„ä½œç”¨" aria-label="Permalink to &quot;å‰ç«¯ç›‘æ§çš„ä½œç”¨&quot;">â€‹</a></h3><ol><li>æ›´å¿«çš„å‘ç°å‘ç°å¼‚å¸¸ã€å®šä½å¼‚å¸¸ã€è§£å†³å¼‚å¸¸</li><li>è§£å†³æ€§èƒ½é—®é¢˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li><li>äº†è§£ä¸šåŠ¡æ•°æ®ï¼ŒæŒ‡å¯¼äº§å“å‡çº§â€”â€”æ•°æ®é©±åŠ¨çš„æ€æƒ³</li></ol><h3 id="å‰ç«¯ç›‘æ§çš„å‘å±•å†ç¨‹" tabindex="-1">å‰ç«¯ç›‘æ§çš„å‘å±•å†ç¨‹ <a class="header-anchor" href="#å‰ç«¯ç›‘æ§çš„å‘å±•å†ç¨‹" aria-label="Permalink to &quot;å‰ç«¯ç›‘æ§çš„å‘å±•å†ç¨‹&quot;">â€‹</a></h3><p>å‰ç«¯ç›‘æ§çš„å‘å±•å†ç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆçº§é˜¶æ®µ</li></ul><p>åœ¨æ—©æœŸçš„ Web å¼€å‘ä¸­ï¼Œå‰ç«¯ç›‘æ§ä¸»è¦ä¾èµ–äºå¼€å‘è€…æ‰‹åŠ¨è¿›è¡Œé”™è¯¯æ£€æŸ¥å’Œè°ƒè¯•ã€‚è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ç›‘æ§æ‰‹æ®µæœ‰é™ï¼Œé”™è¯¯æ’æŸ¥æ•ˆç‡è¾ƒä½ã€‚å¼€å‘è€…é€šå¸¸é€šè¿‡æµè§ˆå™¨çš„æ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼çš„å±€é™æ€§å¾ˆå¤§ï¼Œå¾ˆéš¾å¯¹é”™è¯¯è¿›è¡Œå®æ—¶ç›‘æ§å’Œå®šä½ã€‚</p><ul><li>ç»Ÿè®¡å’Œåˆ†æé˜¶æ®µ</li></ul><p>éšç€äº’è”ç½‘çš„å‘å±•ï¼ŒWeb åº”ç”¨ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå‰ç«¯ç›‘æ§çš„éœ€æ±‚ä¹Ÿè¶Šæ¥è¶Šè¿«åˆ‡ã€‚è¿™ä¸ªé˜¶æ®µå‡ºç°äº†ä¸€äº›ç®€å•çš„å‰ç«¯ç›‘æ§å·¥å…·ï¼Œå¦‚ Google Analyticsã€‚è¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©å¼€å‘è€…æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œåˆ†æé¡µé¢æ€§èƒ½å’Œè®¿é—®æƒ…å†µã€‚ç„¶è€Œï¼Œè¿™äº›å·¥å…·çš„åŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼Œä¸»è¦å…³æ³¨ç”¨æˆ·è¡Œä¸ºå’Œè®¿é—®ç»Ÿè®¡ï¼Œè€Œä¸æ˜¯é”™è¯¯ç›‘æ§å’Œæ’æŸ¥ã€‚</p><ul><li>é”™è¯¯ç›‘æ§å’Œè¿½è¸ªé˜¶æ®µ</li></ul><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå‡ºç°äº†ä¸€äº›ä¸“é—¨ç”¨äºå‰ç«¯é”™è¯¯ç›‘æ§å’Œè¿½è¸ªçš„å·¥å…·ï¼Œå¦‚ Sentryã€Bugsnag å’Œ TrackJS ç­‰ã€‚è¿™äº›å·¥å…·å¯ä»¥å®æ—¶æ•è·å‰ç«¯é”™è¯¯ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚è¿™ä¸ªé˜¶æ®µçš„å‰ç«¯ç›‘æ§å¼€å§‹å…³æ³¨é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚é”™è¯¯ç±»å‹ã€å‘ç”Ÿæ—¶é—´ã€ç”¨æˆ·è®¾å¤‡ä¿¡æ¯ç­‰ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´å¤šçš„é”™è¯¯æ’æŸ¥ä¿¡æ¯ã€‚</p><ul><li>ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ä¼˜åŒ–é˜¶æ®µ</li></ul><p>éšç€ Web åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œå‰ç«¯ç›‘æ§å¼€å§‹å…³æ³¨ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ä¼˜åŒ–ã€‚è¿™ä¸ªé˜¶æ®µçš„å‰ç«¯ç›‘æ§å·¥å…·ä¸ä»…å¯ä»¥æ•è·é”™è¯¯ä¿¡æ¯ï¼Œè¿˜å¯ä»¥ç›‘æ§é¡µé¢åŠ è½½é€Ÿåº¦ã€ç”¨æˆ·äº¤äº’æƒ…å†µç­‰æ€§èƒ½æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼ŒLogRocket å¯ä»¥æä¾›ç”¨æˆ·ä¼šè¯é‡æ”¾åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…äº†è§£ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä»è€Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p><ul><li>ç«¯åˆ°ç«¯ç›‘æ§å’Œå…¨é“¾è·¯è¿½è¸ªé˜¶æ®µ</li></ul><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå‰ç«¯ç›‘æ§å¼€å§‹ä¸åç«¯ç›‘æ§ã€ç½‘ç»œç›‘æ§ç­‰å…¶ä»–ç›‘æ§æ‰‹æ®µç›¸ç»“åˆï¼Œå®ç°ç«¯åˆ°ç«¯çš„å…¨é“¾è·¯è¿½è¸ªã€‚è¿™å¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å…¨é¢åœ°äº†è§£åº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆå’Œæ½œåœ¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒElasticsearchã€Logstash å’Œ Kibanaï¼ˆELK Stackï¼‰å¯ä»¥å®ç°å‰åç«¯æ—¥å¿—çš„ç»Ÿä¸€æ”¶é›†ã€æœç´¢å’Œå¯è§†åŒ–ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œå…¨é“¾è·¯åˆ†æã€‚</p><h2 id="å‰ç«¯ç›‘æ§çš„æ ¸å¿ƒåŠŸèƒ½å’Œå…³é”®æŒ‡æ ‡" tabindex="-1">å‰ç«¯ç›‘æ§çš„æ ¸å¿ƒåŠŸèƒ½å’Œå…³é”®æŒ‡æ ‡ <a class="header-anchor" href="#å‰ç«¯ç›‘æ§çš„æ ¸å¿ƒåŠŸèƒ½å’Œå…³é”®æŒ‡æ ‡" aria-label="Permalink to &quot;å‰ç«¯ç›‘æ§çš„æ ¸å¿ƒåŠŸèƒ½å’Œå…³é”®æŒ‡æ ‡&quot;">â€‹</a></h2><p>å‰ç«¯ç›‘æ§çš„æ ¸å¿ƒåŠŸèƒ½ä¸»è¦åŒ…æ‹¬<code>é”™è¯¯ç›‘æ§</code>ã€<code>æ€§èƒ½ç›‘æ§</code>å’Œ<code>ç”¨æˆ·è¡Œä¸ºç›‘æ§</code>ã€‚ä»¥ä¸‹æ˜¯è¿™äº›æ ¸å¿ƒåŠŸèƒ½çš„å…³é”®æŒ‡æ ‡ï¼š</p><p><strong>é”™è¯¯ç›‘æ§</strong>ï¼šä¸»è¦æŠ¥åŒ…æ‹¬é”™è¯¯ç±»å‹ï¼Œé”™è¯¯ä¿¡æ¯ï¼Œé”™è¯¯å‘ç”Ÿæ—¶é—´ï¼Œç”¨æˆ·è®¾å¤‡ä¿¡æ¯ï¼Œé”™è¯¯å‘ç”Ÿé¢‘ç‡ç­‰ã€‚</p><p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šä¸»è¦åŒ…æ‹¬é¡µé¢åŠ è½½æ—¶é—´ï¼Œé¦–å±æ—¶é—´ï¼Œç™½å±æ—¶é—´ï¼Œè¯·æ±‚å“åº”æ—¶é—´ï¼ŒDOM è§£ææ—¶é—´ï¼Œèµ„æºåŠ è½½æ—¶é—´ç­‰ã€‚</p><p><strong>ç”¨æˆ·è¡Œä¸ºç›‘æ§</strong>ï¼šä¸»è¦åŒ…æ‹¬ç”¨æˆ·è®¿é—®é‡ï¼Œç”¨æˆ·åœç•™æ—¶é—´ï¼Œç”¨æˆ·ç‚¹å‡»è¡Œä¸ºï¼Œé¡µé¢è·³è½¬æƒ…å†µï¼Œç”¨æˆ·è®¾å¤‡ä¿¡æ¯ç­‰ã€‚</p><p>è¿™äº›å…³é”®æŒ‡æ ‡å¯ä»¥å¸®åŠ©å¼€å‘è€…äº†è§£å‰ç«¯åº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆå’Œæ½œåœ¨é—®é¢˜ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p><h2 id="ä¸»æµçš„å‰ç«¯ç›‘æ§ç³»ç»Ÿ" tabindex="-1">ä¸»æµçš„å‰ç«¯ç›‘æ§ç³»ç»Ÿ <a class="header-anchor" href="#ä¸»æµçš„å‰ç«¯ç›‘æ§ç³»ç»Ÿ" aria-label="Permalink to &quot;ä¸»æµçš„å‰ç«¯ç›‘æ§ç³»ç»Ÿ&quot;">â€‹</a></h2><p>ç›®å‰æœ‰ä¸¤ç§å‰ç«¯ç›‘æ§ç³»ç»Ÿçš„æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯æ¥å…¥ç°æˆçš„ç›‘æ§ç³»ç»Ÿï¼Œå¦ä¸€ç§æ˜¯è‡ªå·±æ­å»ºç›‘æ§ç³»ç»Ÿã€‚</p><p><strong>1ã€æ¥å…¥ç°æˆçš„ç›‘æ§ç³»ç»Ÿï¼š</strong></p><p>æœ‰å¾ˆå¤šæµè¡Œçš„å‰ç«¯é”™è¯¯ç›‘æ§å·¥å…·ï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„ï¼š</p><ul><li>Sentryï¼ˆ<a href="https://sentry.io/%EF%BC%89" title="https://sentry.io/ï¼‰" target="_blank" rel="noreferrer">https://sentry.io/ï¼‰</a></li><li>LogRocketï¼ˆ<a href="https://logrocket.com/%EF%BC%89" title="https://logrocket.com/ï¼‰" target="_blank" rel="noreferrer">https://logrocket.com/ï¼‰</a></li><li>Bugsnagï¼ˆ<a href="https://www.bugsnag.com/%EF%BC%89" title="https://www.bugsnag.com/ï¼‰" target="_blank" rel="noreferrer">https://www.bugsnag.com/ï¼‰</a></li><li>frontjsï¼ˆ<a href="https://frontjs.pgyer.com" title="https://frontjs.pgyer.com" target="_blank" rel="noreferrer">https://frontjs.pgyer.com</a>ï¼‰</li><li>fundebugï¼ˆ<a href="https://www.fundebug.com" title="https://www.fundebug.com" target="_blank" rel="noreferrer">https://www.fundebug.com</a>ï¼‰</li><li>webfunnyï¼ˆ<a href="https://www.webfunny.cn" title="https://www.webfunny.cn" target="_blank" rel="noreferrer">https://www.webfunny.cn</a>ï¼‰</li></ul><p>2ã€å¦ä¸€ç§æ˜¯<strong>ä½¿ç”¨å¼€æºå·¥å…·ï¼Œè‡ªå·±æ­å»ºç›‘æ§å¹³å°</strong>ã€‚ä¸»è¦æµç¨‹æ˜¯å‰ç«¯ä½¿ç”¨å¼€æºå·¥å…·ï¼ˆä¾‹å¦‚ï¼š<a href="https://gitee.com/clark-fl/log.js" title="log.js" target="_blank" rel="noreferrer">log.js</a>ï¼‰ã€‚</p><p>ä½†æ˜¯è‡ªå·±æ­å»ºçš„åŸç†æ˜¯å‰ç«¯è®°å½•é”™è¯¯ï¼Œç„¶åå‘é€åˆ°åç«¯è®°å½•ã€‚å‰ç«¯è¿˜éœ€è¦æ–°å¢ä¸€ä¸ªç•Œé¢å¯¹æ—¥å¿—è¿›è¡Œè§£æè¿›è¡Œå±•ç¤ºã€‚</p><p>ä¼˜ç‚¹ï¼šå¯ä»¥ä¸ªæ€§åŒ–ç›‘æ§å†…å®¹ä»¥åŠå±•ç¤ºæ ·å¼ã€‚</p><p>ç¼ºç‚¹ï¼šéº»çƒ¦ï¼Œéœ€è¦èŠ±è´¹å¾ˆå¤šäººåŠ›ç‰©åŠ›ã€‚</p><p><strong>Sentry çš„ä¼˜åŠ¿</strong></p><ul><li>å¼€æºï¼Œæœ‰å…è´¹ç‰ˆ</li><li>å¯ä»¥éƒ¨ç½²è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå®‰å…¨</li><li>é”™è¯¯ä¿¡æ¯åŠå‘Šè­¦æœºåˆ¶å®Œå–„</li><li>ç®€å•æ˜“ä¸Šæ‰‹ï¼Œå¼€å‘æˆæœ¬ä½</li><li>é”™è¯¯è¿½è¸ªåŠçŠ¶æ€æµè½¬åŠæ—¶ï¼Œæ–¹ä¾¿</li><li>ä¸°å¯Œçš„ SDK</li><li>ç¤¾åŒºæ´»è·ƒ</li></ul><p>Sentry çš„è¿™äº›ä¼˜åŠ¿æ—¢èƒ½åŠæ—¶æŠ“å–ç”Ÿäº§ç¯å¢ƒçš„å‰ç«¯æŠ¥é”™å‘å‡ºé€šçŸ¥ï¼Œåˆèƒ½å¤Ÿæä¾›ä¸°å¯Œçš„é”™è¯¯ä¿¡æ¯åŠè·¯å¾„æ–¹ä¾¿å¼€å‘äººå‘˜å®šä½è§£å†³ï¼Œæ»¡è¶³äº†å‰ç«¯é¡¹ç›®é”™è¯¯ç›‘æ§çš„åŸºæœ¬éœ€æ±‚ï¼›åˆæ˜¯å¼€æºå…è´¹çš„ï¼Œå¯ä»¥æ­å»ºè‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¸ç”¨æ‹…å¿ƒæ•°æ®åŠæ•æ„Ÿä¿¡æ¯æ³„éœ²ç­‰é£é™©ï¼ŒåŒæ—¶æ”¯æŒå„ç§å¼€å‘è¯­è¨€åŠæ¡†æ¶ã€‚</p><p>æ‰€ä»¥ï¼Œæœ€ç»ˆé€‰æ‹©äº† Sentry åšä¸ºå‰ç«¯å¹³å°çš„é”™è¯¯ç›‘æ§æ–¹æ¡ˆã€‚</p><h2 id="sentry-å…¥é—¨ä¸å®è·µ-1" tabindex="-1">Sentry å…¥é—¨ä¸å®è·µ <a class="header-anchor" href="#sentry-å…¥é—¨ä¸å®è·µ-1" aria-label="Permalink to &quot;Sentry å…¥é—¨ä¸å®è·µ&quot;">â€‹</a></h2><h3 id="sentry-ç‰ˆæœ¬åŒºåˆ«" tabindex="-1">Sentry ç‰ˆæœ¬åŒºåˆ« <a class="header-anchor" href="#sentry-ç‰ˆæœ¬åŒºåˆ«" aria-label="Permalink to &quot;Sentry ç‰ˆæœ¬åŒºåˆ«&quot;">â€‹</a></h3><p>Sentry åˆ†ä¸º<code>SaaSç‰ˆæœ¬</code>å’Œ<code>ç§æœ‰åŒ–éƒ¨ç½²</code>ç‰ˆæœ¬ã€‚</p><p>å…¶ä¸­ SaaS ç‰ˆæœ¬æä¾›äº†å…è´¹ç‰ˆå’Œå•†ä¸šä»˜è´¹ç‰ˆï¼ŒäºŒè€…åœ¨åŠŸèƒ½ä¸°å¯Œåº¦ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚å…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://sentry.io/pricing/" title="https://sentry.io/pricing/" target="_blank" rel="noreferrer">https://sentry.io/pricing/</a></p><div class="info custom-block"><p class="custom-block-title"><strong>å…è´¹ç‰ˆå’Œä»˜è´¹ç‰ˆçš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</strong></p><ol><li>åŠŸèƒ½ï¼šSentry å…è´¹ç‰ˆä¸ä»˜è´¹ç‰ˆçš„æœ€å¤§åŒºåˆ«åœ¨äºåŠŸèƒ½ã€‚å…è´¹ç‰ˆå¯ä»¥å…è®¸æ‚¨æ”¶é›†é”™è¯¯æŠ¥å‘Šã€è®¾ç½®è­¦æŠ¥ã€åä½œå›¢é˜Ÿä»¥åŠä¸€äº›åŸºæœ¬åˆ†æå·¥å…·ã€‚ä½†æ˜¯ï¼Œä»˜è´¹ç‰ˆè¿˜æä¾›äº†æ›´å¤šçš„é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚äº‹ä»¶åˆ†ç»„ã€è‡ªå®šä¹‰äº‹ä»¶æ•°æ®ã€å…³è”æ•°æ®æºç­‰ã€‚</li><li>å®¹é‡ï¼šå…è´¹ç‰ˆçš„å®¹é‡é™åˆ¶ä¸º 5,000 ä¸ªäº‹ä»¶/æœˆã€‚è€Œæ¯ä¸ªä»˜è´¹è®¡åˆ’éƒ½æœ‰ä¸åŒçš„å®¹é‡é™åˆ¶ã€‚</li><li>æ•°æ®ä¿å­˜æ—¶é—´ï¼šå…è´¹ç‰ˆåªä¿å­˜ 30 å¤©çš„äº‹ä»¶æ•°æ®ï¼Œè€Œä»˜è´¹ç‰ˆåˆ™æä¾›äº†æ›´é•¿çš„æ•°æ®ä¿å­˜æ—¶é—´ã€‚</li><li>æ”¯æŒï¼šä»˜è´¹ç‰ˆäº«æœ‰æ›´é«˜çº§çš„æ”¯æŒï¼ŒåŒ…æ‹¬ 24 å°æ—¶ç”µè¯æ”¯æŒã€é«˜çº§ SLA ä¿è¯ç­‰ã€‚</li><li>å®‰å…¨æ€§ï¼šä»˜è´¹ç‰ˆæä¾›äº†æ›´é«˜çº§çš„å®‰å…¨æ§åˆ¶å’Œæ•°æ®éš”ç¦»åŠŸèƒ½ã€‚</li></ol></div><div class="info custom-block"><p class="custom-block-title"><strong>SaaS ç‰ˆæœ¬å’Œç§æœ‰åŒ–éƒ¨ç½²ç‰ˆæœ¬çš„åŒºåˆ«ï¼š</strong></p><p>Sentry çš„ SaaS ç‰ˆæœ¬å’Œç§æœ‰åŒ–ç‰ˆæœ¬åœ¨åŠŸèƒ½ä¸Šæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä½†æ˜¯ç§æœ‰åŒ–ç‰ˆæœ¬å¯ä»¥æ›´åŠ çµæ´»åœ°å®šåˆ¶å’Œæ‰©å±•åŠŸèƒ½ï¼Œæ»¡è¶³ç”¨æˆ·çš„ç‰¹å®šéœ€æ±‚ã€‚</p><p>Sentry çš„ç§æœ‰åŒ–ç‰ˆæœ¬å¯ä»¥æ›´åŠ çµæ´»åœ°å®šåˆ¶å’Œæ‰©å±•åŠŸèƒ½ï¼Œä¾‹å¦‚æ·»åŠ æ–°çš„æ•°æ®æºã€è‡ªå®šä¹‰æŠ¥å‘Šã€é›†æˆç¬¬ä¸‰æ–¹å·¥å…·ç­‰ï¼Œæ»¡è¶³ç”¨æˆ·çš„ç‰¹å®šéœ€æ±‚ã€‚æ­¤å¤–ï¼Œç§æœ‰åŒ–ç‰ˆæœ¬è¿˜å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ•°æ®çš„å®‰å…¨æ€§ï¼Œå› ä¸ºæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨ç”¨æˆ·è‡ªå·±çš„æœåŠ¡å™¨ä¸Šã€‚ æ€»ä¹‹ï¼ŒSentry çš„ SaaS ç‰ˆæœ¬å’Œç§æœ‰åŒ–ç‰ˆæœ¬åœ¨åŠŸèƒ½ä¸ŠåŸºæœ¬ç›¸åŒï¼Œä½†ç§æœ‰åŒ–ç‰ˆæœ¬æ›´åŠ çµæ´»å’Œå®šåˆ¶åŒ–ï¼Œå¯ä»¥æ»¡è¶³ç”¨æˆ·çš„ç‰¹å®šéœ€æ±‚ã€‚</p></div><h3 id="sentry-ç§æœ‰åŒ–éƒ¨ç½²" tabindex="-1">Sentry ç§æœ‰åŒ–éƒ¨ç½² <a class="header-anchor" href="#sentry-ç§æœ‰åŒ–éƒ¨ç½²" aria-label="Permalink to &quot;Sentry ç§æœ‰åŒ–éƒ¨ç½²&quot;">â€‹</a></h3><p>Sentry çš„ç®¡ç†åå°æ˜¯åŸºäº Python Django å¼€å‘çš„ã€‚åŒæ—¶ï¼Œè¿™ä¸ªç®¡ç†åå°éœ€è¦ç”¨åˆ° Postgres æ•°æ®åº“ï¼ˆç®¡ç†åå°é»˜è®¤çš„æ•°æ®åº“ï¼‰ã€ClickHouseï¼ˆå­˜æ•°æ®ç‰¹å¾çš„æ•°æ®åº“ï¼‰ã€relayã€kafkaã€redis ç­‰ä¸€äº›åŸºç¡€æœåŠ¡æˆ–ç”± Sentry å®˜æ–¹ç»´æŠ¤çš„æ€»å…± 23 ä¸ªæœåŠ¡æ”¯æ’‘è¿è¡Œã€‚</p><p>å¦‚æœç‹¬ç«‹çš„éƒ¨ç½²å’Œç»´æŠ¤è¿™ 23 ä¸ªæœåŠ¡å°†æ˜¯å¼‚å¸¸å¤æ‚å’Œå›°éš¾çš„ï¼Œå¹¸è¿çš„æ˜¯ï¼Œå®˜æ–¹æä¾›äº†åŸºäº docker é•œåƒçš„ä¸€é”®éƒ¨ç½²çš„ä»“åº“ï¼š <a href="https://github.com/getsentry/self-hosted" title="self-hosted" target="_blank" rel="noreferrer">self-hosted</a>ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ç§æœ‰åŒ–éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®‰è£…å¥½<code>Docker</code>å’Œ<code>Docker-compose</code>ã€‚ä¸‹é¢æ˜¯å®ƒçš„è½¯ç¡¬ä»¶é…ç½®è¦æ±‚ï¼š</p><ul><li>Docker 19.03.6+</li><li>Compose 1.28.0+</li><li>4 CPU Cores</li><li>8 GB RAM</li><li>20 GB Free Disk Space</li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>ç”±äºæˆ‘åœ¨ä½¿ç”¨å®˜æ–¹<a href="https://github.com/getsentry/self-hosted" title="self-hosted" target="_blank" rel="noreferrer">self-hosted</a>éƒ¨ç½²çš„æ—¶å€™ï¼Œé‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ¢äº†å¾ˆå¤š docker,docker-compose ä»¥åŠ self-hosted çš„ç‰ˆæœ¬å‡å‡ºç°ä¸åŒçš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">#6 Err:5 http://deb.debian.org/debian bullseye/main amd64 Packages Connection timed out [IP: 146.75.114.132 80]</span></span>
<span class="line"><span style="color:#e1e4e8;">...</span></span>
<span class="line"><span style="color:#e1e4e8;">#6 314.4 E: Failed to fetch http://deb.debian.org/debian/dists/bullseye/main/binary-amd64/Packages  Connection timed out [IP: 146.75.114.132 80]</span></span>
<span class="line"><span style="color:#e1e4e8;">#6 314.4 E: Failed to fetch http://deb.debian.org/debian/dists/bullseye/main/binary-amd64/Packages  Connection timed out [IP: 146.75.114.132 80]</span></span>
<span class="line"><span style="color:#e1e4e8;">...</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 E: Package &#39;cron&#39; has no installation candidate</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 ERROR: process &quot;/bin/sh -c apt-get update &amp;&amp; apt-get install -y --no-install-recommends cron &amp;&amp;     rm -r /var/lib/apt/lists/*&quot; did not complete successfully: exit code: 100</span></span>
<span class="line"><span style="color:#e1e4e8;">------</span></span>
<span class="line"><span style="color:#e1e4e8;"> &gt; [4/5] RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends cron &amp;&amp;     rm -r /var/lib/apt/lists/*:</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 W: Failed to fetch http://deb.debian.org/debian/dists/bullseye-updates/InRelease  Connection timed out [IP: 151.101.78.132 80]</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 W: Some index files failed to download. They have been ignored, or old ones used instead.</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 Reading package lists...</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 Building dependency tree...</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 Reading state information...</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 Package cron is not available, but is referred to by another package.</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 This may mean that the package is missing, has been obsoleted, or</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 is only available from another source</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 141.4 E: Package &#39;cron&#39; has no installation candidate</span></span>
<span class="line"><span style="color:#e1e4e8;">------</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 CANCELED</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 CANCELED</span></span>
<span class="line"><span style="color:#e1e4e8;">#8 CANCELED</span></span>
<span class="line"><span style="color:#e1e4e8;">failed to solve: process &quot;/bin/sh -c apt-get update &amp;&amp; apt-get install -y --no-install-recommends cron &amp;&amp;     rm -r /var/lib/apt/lists/*&quot; did not complete successfully: exit code: 100</span></span>
<span class="line"><span style="color:#e1e4e8;">Unable to find image &#39;sentry-self-hosted-jq-local:latest&#39; locally</span></span>
<span class="line"><span style="color:#e1e4e8;">Unable to find image &#39;sentry-self-hosted-jq-local:latest&#39; locally</span></span>
<span class="line"><span style="color:#e1e4e8;">docker: Error response from daemon: pull access denied for sentry-self-hosted-jq-local, repository does not exist or may require &#39;docker login&#39;: denied: requested access to the resource is denied.</span></span>
<span class="line"><span style="color:#e1e4e8;">See &#39;docker run --help&#39;.</span></span>
<span class="line"><span style="color:#e1e4e8;">docker: Error response from daemon: pull access denied for sentry-self-hosted-jq-local, repository does not exist or may require &#39;docker login&#39;: denied: requested access to the resource is denied.</span></span>
<span class="line"><span style="color:#e1e4e8;">See &#39;docker run --help&#39;.</span></span></code></pre></div><p>æ€»æ„Ÿè§‰æ˜¯ç½‘ç»œé—®é¢˜ï¼Œåˆ‡æ¢ç½‘ç»œï¼Œåˆ‡æ¢é•œåƒæºå•¥çš„ï¼ŒèŠ±äº†å‡ å¤©æ—¶é—´ï¼Œéƒ½æ‰¾ä¸åˆ°è§£å†³åŠæ³•ã€‚</p><blockquote><p>ğŸ’¡ æ­¤å¤„åº”è¯¥è¯·æ•™è¿ç»´åŒå­¦ï¼Œä¸è¦è‡ªå·±å†çç¢ç£¨äº†</p></blockquote></div><h3 id="vue-é¡¹ç›®æ¥å…¥-sentry-å®è·µ" tabindex="-1">Vue é¡¹ç›®æ¥å…¥ Sentry å®è·µ <a class="header-anchor" href="#vue-é¡¹ç›®æ¥å…¥-sentry-å®è·µ" aria-label="Permalink to &quot;Vue é¡¹ç›®æ¥å…¥ Sentry å®è·µ&quot;">â€‹</a></h3><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.sentry.io/platforms/javascript/guides/vue/" title="https://docs.sentry.io/platforms/javascript/guides/vue/" target="_blank" rel="noreferrer">https://docs.sentry.io/platforms/javascript/guides/vue/</a></p></blockquote><h4 id="æ“ä½œæ­¥éª¤" tabindex="-1">æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#æ“ä½œæ­¥éª¤" aria-label="Permalink to &quot;æ“ä½œæ­¥éª¤&quot;">â€‹</a></h4><p>ä¸€ä¸ª Vue é¡¹ç›®æ¥å…¥ Sentry SaaS ç‰ˆçš„å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>æ³¨å†Œä¸ç™»å½•</p><p>é¦–å…ˆï¼Œè®¿é—® Sentry å®˜ç½‘ï¼ˆ<a href="https://sentry.io/" title="https://sentry.io/" target="_blank" rel="noreferrer">https://sentry.io/</a> ï¼‰è¿›è¡Œæ³¨å†Œå¹¶ç™»å½•ï¼Œå®Œæˆåè¿›å…¥ Sentry çš„ Dashboardã€‚</p></li><li><p>åˆ›å»ºé¡¹ç›®</p><p>åœ¨ Sentry Dashboard ä¸­ï¼Œç‚¹å‡»â€œCreate Projectâ€ï¼Œé€‰æ‹© Vue ä½œä¸ºé¡¹ç›®ç±»å‹ï¼Œç„¶åä¸ºé¡¹ç›®å‘½åå¹¶ç‚¹å‡»â€œCreate Projectâ€ã€‚</p></li><li><p>å®‰è£… Sentry SDK</p><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œé€šè¿‡ npm æˆ– yarn å®‰è£… Sentry çš„ Vue SDKã€‚æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--save</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@sentry/vue</span></span></code></pre></div></li><li><p>é…ç½® Sentry</p><p>åœ¨ Vue é¡¹ç›®çš„<code>main.js</code>æˆ–<code>main.ts</code>æ–‡ä»¶ä¸­ï¼Œå¼•å…¥å¹¶é…ç½® Sentryã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°æ–‡ä»¶é¡¶éƒ¨ï¼š</p><p>Vue2 ä»£ç </p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Vue </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Router </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vue-router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Vue.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(Router);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Router</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ç”Ÿäº§ç¯å¢ƒæ¥å…¥Sentry</span></span>
<span class="line"><span style="color:#6A737D;">// å¦‚æœä¸æƒ³æ¥å…¥Sentryï¼Œå¯ä»¥å°† .env æ–‡ä»¶ä¸­çš„ SENTRY_ENABLE è®¾ç½®ä¸º falseï¼Œæˆ–è€…ç›´æ¥åˆ é™¤è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_STATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;%c== Sentry init ==&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;background:#7E57C2;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">all</span><span style="color:#E1E4E8;">([</span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;@sentry/vue&quot;</span><span style="color:#E1E4E8;">)]).</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">modules</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Sentry</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> modules[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">    Sentry.</span><span style="color:#B392F0;">init</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      Vue,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// åœ¨Sentryé¡¹ç›®é¡µé¢è·å–DSN</span></span>
<span class="line"><span style="color:#E1E4E8;">      dsn: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_DSN</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// å¯ç”¨æµè§ˆå™¨ç«¯çš„æ€§èƒ½è¿½è¸ªåŠŸèƒ½ï¼Œå¹¶å¯¹ Vue Router çš„è·¯ç”±å˜åŒ–è¿›è¡Œæ€§èƒ½è¿½è¸ªã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">      integrations: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Sentry.</span><span style="color:#B392F0;">BrowserTracing</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">          routingInstrumentation: Sentry.</span><span style="color:#B392F0;">vueRouterInstrumentation</span><span style="color:#E1E4E8;">(router),</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">// å®šä¹‰äº†å…è®¸è¿½è¸ªæ€§èƒ½çš„æºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŒ…æ‹¬æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆlocalhostï¼‰ã€ç©ºå­—ç¬¦ä¸²ï¼ˆè¡¨ç¤ºå½“å‰åŸŸåï¼‰ä»¥åŠå½“å‰åŸŸåä¸‹çš„æ‰€æœ‰è·¯å¾„ï¼ˆé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ /^\\// åŒ¹é…ï¼‰ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">          tracePropagationTargets: [</span><span style="color:#9ECBFF;">&quot;localhost&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#85E89D;font-weight:bold;">\\/</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">        }),</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="color:#E1E4E8;">      logErrors: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// Set tracesSampleRate to 1.0 to capture 100%</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// of transactions for performance monitoring.</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// We recommend adjusting this value in production</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// è®¾ç½®é‡‡æ ·ç‡ï¼Œ1.0è¡¨ç¤º100%çš„è¯·æ±‚éƒ½ä¼šè¢«è¿½è¸ª</span></span>
<span class="line"><span style="color:#E1E4E8;">      tracesSampleRate: </span><span style="color:#79B8FF;">1.0</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      release: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_VERSION</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Vue</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  router,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">h</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">h</span><span style="color:#E1E4E8;">(App),</span></span>
<span class="line"><span style="color:#E1E4E8;">}).</span><span style="color:#B392F0;">$mount</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;#app&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><p><code>.env</code>ä»£ç ä¸ºï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">VUE_APP_SENTRY_ENABLE=false</span></span>
<span class="line"><span style="color:#e1e4e8;">VUE_APP_SENTRY_DSN=https://6a47xxx34e7bxxx5996c87@o136xx522.ingest.sentry.io/450504xxx56736</span></span>
<span class="line"><span style="color:#e1e4e8;">VUE_APP_VERSION=1.0</span></span></code></pre></div><p>Vue3 ä»£ç </p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createApp } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createRouter } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vue-router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> Sentry </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@sentry/vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">app</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createApp</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createRouter</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// å¼•å…¥sentry</span></span>
<span class="line"><span style="color:#6A737D;">// sentryå·²å¯ç”¨ &amp;&amp; (æµ‹è¯•ç¯å¢ƒ || betaç¯å¢ƒ)</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.env.</span><span style="color:#79B8FF;">VITE_SENTRY_ENABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.env.</span><span style="color:#79B8FF;">VITE_SERVER_MODE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;testBuild&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.env.</span><span style="color:#79B8FF;">VITE_SERVER_MODE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;developmentBuild&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;%c== Sentry init ==&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;background:#7E57C2;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  Sentry.</span><span style="color:#B392F0;">init</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    app,</span></span>
<span class="line"><span style="color:#E1E4E8;">    dsn: </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.env.</span><span style="color:#79B8FF;">VITE_SENTRY_DSN</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    integrations: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Sentry.</span><span style="color:#B392F0;">BrowserTracing</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// Set \`tracePropagationTargets\` to control for which URLs distributed tracing should be enabled</span></span>
<span class="line"><span style="color:#E1E4E8;">        tracePropagationTargets: [</span><span style="color:#9ECBFF;">&quot;localhost&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#85E89D;font-weight:bold;">\\/</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">        routingInstrumentation: Sentry.</span><span style="color:#B392F0;">vueRouterInstrumentation</span><span style="color:#E1E4E8;">(router),</span></span>
<span class="line"><span style="color:#E1E4E8;">      }),</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Sentry.</span><span style="color:#B392F0;">Replay</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// Performance Monitoring</span></span>
<span class="line"><span style="color:#E1E4E8;">    tracesSampleRate: </span><span style="color:#79B8FF;">1.0</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// Capture 100% of the transactions, reduce in production!</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// Session Replay</span></span>
<span class="line"><span style="color:#E1E4E8;">    replaysSessionSampleRate: </span><span style="color:#79B8FF;">0.1</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// This sets the sample rate at 10%. You may want to change it to 100% while in development and then sample at a lower rate in production.</span></span>
<span class="line"><span style="color:#E1E4E8;">    replaysOnErrorSampleRate: </span><span style="color:#79B8FF;">1.0</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// If you&#39;re not already sampling the entire session, change the sample rate to 100% when sampling sessions where errors occur.</span></span>
<span class="line"><span style="color:#E1E4E8;">    release: </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.env.</span><span style="color:#79B8FF;">VITE_APP_VERSION</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;1.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(router);</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;#app&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><p><code>.env</code>ä»£ç ä¸ºï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">VITE_SENTRY_ENABLE=true # sentryæ‰‹åŠ¨å¼€å…³</span></span>
<span class="line"><span style="color:#e1e4e8;">VITE_SENTRY_DSN=https://56a60ccxxx71ab9xxx@o136x22.ingest.sentry.io/45053xxx7312</span></span>
<span class="line"><span style="color:#e1e4e8;">VITE_SENTRY_AUTH_TOKEN=6226f50xxxea6decb92d7d07afxxx</span></span>
<span class="line"><span style="color:#e1e4e8;">VITE_SENTRY_ORG=481931cxxx</span></span>
<span class="line"><span style="color:#e1e4e8;">VITE_SENTRY_PROJECT=ty-store</span></span>
<span class="line"><span style="color:#e1e4e8;">VITE_APP_VERSION=1.6.0</span></span></code></pre></div></li><li><p>é…ç½®æ€§èƒ½ç›‘æ§ </p><p>è‹¥è¦å¯ç”¨æ€§èƒ½ç›‘æ§ï¼Œéœ€è¦åœ¨ Sentry åˆå§‹åŒ–é…ç½®ä¸­æ·»åŠ <code>tracesSampleRate</code>å±æ€§ï¼Œè®¾ç½®é‡‡æ ·ç‡ï¼ˆ0 åˆ° 1 ä¹‹é—´çš„å€¼ï¼‰</p></li><li><p>éªŒè¯é…ç½® </p><p>åœ¨ Vue é¡¹ç›®ä¸­æ•…æ„å¼•å…¥ä¸€ä¸ªé”™è¯¯ï¼Œä¾‹å¦‚åœ¨æŸä¸ªç»„ä»¶çš„æ–¹æ³•ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œç„¶åè¿è¡Œé¡¹ç›®å¹¶è§¦å‘è¯¥é”™è¯¯ã€‚æ£€æŸ¥ Sentry Dashboardï¼Œç¡®è®¤é”™è¯¯å·²ç»è¢«æ•è·å¹¶æ˜¾ç¤ºã€‚</p></li><li><p>éƒ¨ç½²ä¸ç›‘æ§ </p><p>å®Œæˆé…ç½®åï¼Œå°† Vue é¡¹ç›®éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚Sentry å°†è‡ªåŠ¨æ•è·å¹¶æŠ¥å‘Šç”Ÿäº§ç¯å¢ƒä¸­çš„é”™è¯¯å’Œæ€§èƒ½é—®é¢˜ã€‚</p></li></ol><h4 id="é…ç½®-source-maps" tabindex="-1">é…ç½® Source Maps <a class="header-anchor" href="#é…ç½®-source-maps" aria-label="Permalink to &quot;é…ç½® Source Maps&quot;">â€‹</a></h4><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.sentry.io/platforms/javascript/guides/vue/sourcemaps/" title="https://docs.sentry.io/platforms/javascript/guides/vue/sourcemaps/" target="_blank" rel="noreferrer">https://docs.sentry.io/platforms/javascript/guides/vue/sourcemaps/</a></p></blockquote><p>å½“æˆ‘ä»¬åœ¨ Sentry ç‚¹è¿›é”™è¯¯è¯¦æƒ…çš„æ—¶å€™å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾ç¤ºçš„å †æ ˆè·Ÿè¸ªä¸å¤Ÿæ¸…æ™°ã€‚å½“æˆ‘ä»¬ä¸Šä¼  Source Maps æ–‡ä»¶åï¼Œå°±èƒ½ç›´æ¥å®šä½åˆ°é”™è¯¯çš„è¡Œæ•°ï¼Œæ›´åŠ æ–¹ä¾¿æˆ‘ä»¬å®šä½é”™è¯¯ä»£ç ã€‚</p><p>ä¸‹é¢æ˜¯å®˜æ–¹ç»™å‡ºçš„å¯¹æ¯”å›¾ï¼š</p><p><img src="`+o+`" alt=""></p><p>ä¸Šä¼  sourceMap åˆ° sentry å¹³å° è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼ </p><ul><li><code>sentry-cli</code></li><li><code>sentry-webpack-plugin</code></li></ul><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿é‡‡ç”¨ webpack æ–¹å¼ã€‚</p><p><strong>vue2+webpack</strong></p><ul><li>å®‰è£…æ’ä»¶</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--save-dev</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@sentry/webpack-plugin</span></span></code></pre></div><ul><li>é…ç½®<code>vue.config.js</code></li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">defineConfig</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;@vue/cli-service&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">SentryWebpackPlugin</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;@sentry/webpack-plugin&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isProd</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> p<wbr>rocess.env.</span><span style="color:#79B8FF;">NODE_ENV</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;production&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * æ˜¯å¦é€šè¿‡ sentry ä¸Šä¼  SourceMap æ–‡ä»¶</span></span>
<span class="line"><span style="color:#6A737D;"> æ·»åŠ  linux åˆ¤æ–­ï¼Œé¿å…å…¶ä»–ç¯å¢ƒæ„å»ºä¸Šä¼ ç‰ˆæœ¬å·å½±å“</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isSentry</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">  isProd </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">  p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_ENABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">  [</span><span style="color:#9ECBFF;">&quot;linux&quot;</span><span style="color:#E1E4E8;">].</span><span style="color:#B392F0;">includes</span><span style="color:#E1E4E8;">(os.</span><span style="color:#B392F0;">platform</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#6A737D;">// æ˜¯å¦æ»¡è¶³ Sentry ä¸ŠæŠ¥æ¡ä»¶</span></span>
<span class="line"><span style="color:#E1E4E8;">p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_STATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`\${</span><span style="color:#E1E4E8;">isSentry</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">defineConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  transpileDependencies: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è¾“å‡º map æ–‡ä»¶ (sentry ç¯å¢ƒä¸Šå¼€å¯)</span></span>
<span class="line"><span style="color:#E1E4E8;">  productionSourceMap: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_STATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">configureWebpack</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">config</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_STATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      config.plugins.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SentryWebpackPlugin</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">          org: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_ORG</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          project: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_PROJECT</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">// ä¸Šä¼ ç”Ÿæˆçš„ Source Maps çš„ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">          include: </span><span style="color:#9ECBFF;">&quot;./dist&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          ignore: [</span><span style="color:#9ECBFF;">&quot;node_modules&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;vue.config.js&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">// authTokenè·å–åœ°å€ï¼šhttps://sentry.io/settings/account/api/auth-tokens/</span></span>
<span class="line"><span style="color:#E1E4E8;">          authToken: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_SENTRY_AUTH_TOKEN</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          release: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_VERSION</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;1.0&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// ä¸ main.js ä¸­çš„ release ä¿æŒä¸€è‡´</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">// urlPrefix: &quot;~/static/&quot;, // å½“index.htmlå’ŒincludeæºéåŒçº§æ—¶ä½¿ç”¨</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">      );</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><ul><li>è®¾ç½®<code>.env</code>æ–‡ä»¶</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">VUE_APP_SENTRY_ENABLE</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># sentryæ‰‹åŠ¨å¼€å…³</span></span>
<span class="line"><span style="color:#E1E4E8;">VUE_APP_SENTRY_AUTH_TOKEN</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">6226</span><span style="color:#9ECBFF;">f50xxxxecbxxxxb64xxe8e162</span></span>
<span class="line"><span style="color:#E1E4E8;">VUE_APP_SENTRY_ORG</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">481</span><span style="color:#9ECBFF;">xxx245</span></span>
<span class="line"><span style="color:#E1E4E8;">VUE_APP_SENTRY_PROJECT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">vue2-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">VUE_APP_SENTRY_DSN</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">vue2-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">VUE_APP_VERSION</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1.0</span></span></code></pre></div><ul><li><code>main.js</code>ä¿®æ”¹</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">init</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// releaseå¯ä»¥ä¸ç”¨è®¾ç½®ï¼Œsentryä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ç‰ˆæœ¬ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// å¦‚ä½•è®¾ç½®äº†çš„è¯ï¼Œéœ€è¦ä¸ vue.config.js ä¸­çš„ release ä¿æŒä¸€è‡´</span></span>
<span class="line"><span style="color:#E1E4E8;">  release: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_VERSION</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><ul><li>æµ‹è¯•</li></ul><p>è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å°† map ä¸Šä¼ åˆ°äº† sentry æœåŠ¡ã€‚</p><p><img src="`+e+'" alt=""></p><p>æˆ‘ä»¬å†æ¬¡å°è¯•è®©ä»£ç æŠ¥é”™ï¼Œç„¶åçœ‹åˆ°å·²ç»å¯ä»¥å®šä½åˆ°ä»£ç å…·ä½“çš„è¡Œæ•°ã€‚</p><p><img src="'+t+`" alt=""></p><p>Vue3+vite é…ç½®</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { fileURLToPath, URL } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;node:url&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { defineConfig } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vite&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> vue </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@vitejs/plugin-vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { sentryVitePlugin } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@sentry/vite-plugin&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loadEnvByMode</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">mode</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loadEnv</span><span style="color:#E1E4E8;">(mode, process.</span><span style="color:#B392F0;">cwd</span><span style="color:#E1E4E8;">())[env];</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// https://vitejs.dev/config/</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">defineConfig</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">mode</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è·å–ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;â­mode==&gt;&quot;</span><span style="color:#E1E4E8;">, mode);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;å½“å‰ç¯å¢ƒNODE_ENV==&gt;&quot;</span><span style="color:#E1E4E8;">, p<wbr>rocess.env.</span><span style="color:#79B8FF;">NODE_ENV</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æ˜¯å¦å¼€å¯ sentry</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">enableSentry</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">    (mode </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;developmentBuild&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> mode </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;testBuild&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">loadEnvByMode</span><span style="color:#E1E4E8;">(mode, </span><span style="color:#9ECBFF;">&quot;VITE_SENTRY_ENABLE&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> viteConfig </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    build: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      sourcemap: enableSentry, </span><span style="color:#6A737D;">// Source map generation must be turned on</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    plugins: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">vue</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// Put the Sentry vite plugin after all other plugins</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">sentryVitePlugin</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        org: </span><span style="color:#B392F0;">loadEnvByMode</span><span style="color:#E1E4E8;">(mode, </span><span style="color:#9ECBFF;">&quot;VITE_SENTRY_ORG&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">        project: </span><span style="color:#B392F0;">loadEnvByMode</span><span style="color:#E1E4E8;">(mode, </span><span style="color:#9ECBFF;">&quot;VITE_SENTRY_PROJECT&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// Auth tokens can be obtained from https://sentry.io/settings/account/api/auth-tokens/</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// and need \`project:releases\` and \`org:read\` scopes</span></span>
<span class="line"><span style="color:#E1E4E8;">        authToken: </span><span style="color:#B392F0;">loadEnvByMode</span><span style="color:#E1E4E8;">(mode, </span><span style="color:#9ECBFF;">&quot;VITE_SENTRY_AUTH_TOKEN&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        sourcemaps: {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">// Specify the directory containing build artifacts</span></span>
<span class="line"><span style="color:#E1E4E8;">          assets: </span><span style="color:#9ECBFF;">&quot;./dist/**&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          ignore: [</span><span style="color:#9ECBFF;">&quot;node_modules&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">          deleteFilesAfterUpload: </span><span style="color:#9ECBFF;">&quot;./dist/**/*.map&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">      }),</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    resolve: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      alias: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;@&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#B392F0;">fileURLToPath</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">URL</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;./src&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.url)),</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> viteConfig;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h4 id="æ³¨æ„äº‹é¡¹" tabindex="-1">æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h4><p>æ³¨æ„ï¼š<code>@sentry/webpack-plugin</code>åœ¨ä¸Šä¼ åä¸ä¼šåˆ é™¤ sourceMapï¼Œéœ€è¦åœ¨æ„å»ºä¹‹ååˆ é™¤ <code>.map</code> ä»£ç ï¼š</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>sourcemaps.deleteFilesAfterUpload å¯ä»¥åˆ é™¤<code>.map</code>æ–‡ä»¶ï¼Œç›®å‰è¿˜æœªéªŒè¯</p></div><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#9ECBFF;">&quot;scripts&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;build&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;vue-cli-service build &amp;&amp; rm -fr ./dist/js/*.map&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h4 id="é‡åˆ°çš„é—®é¢˜" tabindex="-1">é‡åˆ°çš„é—®é¢˜ <a class="header-anchor" href="#é‡åˆ°çš„é—®é¢˜" aria-label="Permalink to &quot;é‡åˆ°çš„é—®é¢˜&quot;">â€‹</a></h4><p><strong>1ã€å®‰è£…<code>@sentry/webpack-plugin</code>ä¸€ç›´å¤±è´¥</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">D:\\Gitee\\vue2-demo&gt;npm i @sentry/webpack-plugin -D</span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR! code 1</span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR! path D:\\Gitee\\vue2-demo\\node_modules\\@sentry\\cli</span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR! command failed</span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR! command C:\\Windows\\system32\\cmd.exe /d /s /c node ./scripts/install.jsnpm ERR! [sentry-cli] Using cached binary:</span></span>
<span class="line"><span style="color:#e1e4e8;">C:\\Users\\daotin\\AppData\\Local\\npm-cache\\sentry-cli\\a309cb-sentry-cli-Windows-x86-64.exe</span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR! Error: Command failed: D:\\Gitee\\vue2-demo\\node_modules\\@sentry\\cli\\sentry-cli.exe --version</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR! A complete log of this run can be found in:</span></span>
<span class="line"><span style="color:#e1e4e8;">npm ERR!     C:\\Users\\daotin\\AppData\\Local\\npm-cache\\_logs\\2023-04-21T00_46_28_138Z-debug-0.log</span></span></code></pre></div><p>åŸå› æœªçŸ¥ï¼Œä½†æ˜¯åœ¨è‡ªå·±å®¶é‡Œå¯ä»¥ã€‚<strong>å¯èƒ½æ˜¯å…¬å¸ç½‘ç»œé—®é¢˜ã€‚</strong></p><details class="details custom-block"><summary>å°è¯•ä½¿ç”¨<code>--ignore-scripts</code>æŒ‡ä»¤</summary><p>å®¶é‡Œçš„ npm å’Œ node ç‰ˆæœ¬éƒ½å’Œå…¬å¸çš„ä¸€æ ·ï¼Œä¹Ÿæ˜¯åŒä¸€ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯å…¬å¸çš„å°±æ˜¯å®‰è£…ä¸äº†ã€‚ã€‚</p><p>å°è¯•ä½¿ç”¨<code>--ignore-scripts</code>æŒ‡ä»¤è·³è¿‡æ‰§è¡Œ package.json ä¸­å®šä¹‰çš„å®‰è£…è„šæœ¬ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ é€šè¿‡ npm install å‘½ä»¤å®‰è£…ä¸€ä¸ªåŒ…æ—¶ï¼Œnpm ä¼šæ‰§è¡Œè¯¥åŒ…ï¼ˆä»¥åŠå®ƒä¾èµ–çš„å…¶ä»–åŒ…ï¼‰ä¸­å®šä¹‰çš„å®‰è£…è„šæœ¬ã€‚è¿™äº›è„šæœ¬é€šå¸¸ç”¨äºæ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œå¦‚ç¼–è¯‘ã€æ„å»ºæˆ–é…ç½®ç¯å¢ƒç­‰ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å®‰è£…è„šæœ¬å¯èƒ½ä¼šå¤±è´¥ï¼Œæˆ–è€…ä½ å¯èƒ½ä¸æƒ³æ‰§è¡Œå®ƒä»¬ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ --ignore-scripts é€‰é¡¹æ¥è·³è¿‡è¿™äº›è„šæœ¬çš„æ‰§è¡Œã€‚</p><p>åœ¨ä½ çš„æƒ…å†µä¸‹ï¼Œç”±äº @sentry/vite-plugin çš„å®‰è£…è„šæœ¬éœ€è¦ sentry-cli å‘½ä»¤ï¼Œä½†æ˜¯è¯¥å‘½ä»¤åœ¨ä½ çš„ç³»ç»Ÿä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œå› æ­¤å®‰è£…å¤±è´¥ã€‚ä½¿ç”¨ --ignore-scripts é€‰é¡¹å¯ä»¥è®© npm è·³è¿‡è¿™ä¸ªè„šæœ¬çš„æ‰§è¡Œï¼Œä»è€Œå®ŒæˆåŒ…çš„å®‰è£…ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">npm install @sentry/vite-plugin --save-dev --ignore-scripts</span></span></code></pre></div><p>å®‰è£…å¾—ä»¥é¡ºåˆ©è¿›è¡Œï¼Œä½†æ˜¯æœ€ååœ¨æ‰“åŒ…çš„æ—¶å€™è¿˜æ˜¯æŠ¥é”™ã€‚ç›®å‰è¿˜æœªè§£å†³ï¼</p></details><p><strong>2ã€é…ç½® sourcemap åï¼Œæ„å»º<code>npm run build</code>æŠ¥é”™ï¼š</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">error  </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> .</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">node_modules</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">@sentry</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">webpack</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">plugin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">src</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">sentry</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">webpack.module.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Syntax </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">: Thread </span><span style="color:#B392F0;">Loader</span><span style="color:#E1E4E8;"> (Worker </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">releasePromise.then is not a </span><span style="color:#F97583;">function</span></span></code></pre></div><p>è§£å†³æ–¹æ¡ˆï¼šset the <a href="https://cli.vuejs.org/config/#parallel" title="parallel" target="_blank" rel="noreferrer">parallel</a> option to <code>false</code> to disable the <code>thread-loader</code>:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#6A737D;">// vue.config.js</span></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  parallel: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p><strong>3ã€æœ¬åœ°å¯åŠ¨ dev ç¯å¢ƒå°è¯•ä½¿ç”¨ sourcemap ä¼šæœ‰é—®é¢˜</strong></p><p>åœ¨å¼€å‘ç¯å¢ƒå°è¯•ä½¿ç”¨ sourcemap ä¼šæœ‰é—®é¢˜å°±æ˜¯ï¼Œä¸Šä¼ åˆ°çš„ sourcemap æ˜¯å¸¦æœ‰ hash çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œæ—¶æ˜¯æ²¡æœ‰ hash çš„ï¼Œäºæ˜¯ä¼šåœ¨ Sentry æœåŠ¡ç•Œé¢æç¤º warningï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">The given abs_path </span><span style="color:#F97583;">of</span><span style="color:#E1E4E8;"> the stack frame is [http:</span><span style="color:#6A737D;">//localhost:8080/js/about.js](http://localhost:8080/js/about.js) which doesn&#39;t match any release artifactã€‚</span></span></code></pre></div><p>æ‰€ä»¥ï¼Œsourcemap çš„æµ‹è¯•éœ€è¦å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒè¿›è¡Œæµ‹è¯•ã€‚</p><h4 id="è‡ªå®šä¹‰ä¸ŠæŠ¥" tabindex="-1">è‡ªå®šä¹‰ä¸ŠæŠ¥ <a class="header-anchor" href="#è‡ªå®šä¹‰ä¸ŠæŠ¥" aria-label="Permalink to &quot;è‡ªå®šä¹‰ä¸ŠæŠ¥&quot;">â€‹</a></h4><p>Sentry æä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼Œå…è®¸ä½ æ ¹æ®éœ€è¦è‡ªå®šä¹‰å“ªäº›é”™è¯¯éœ€è¦ä¸ŠæŠ¥ï¼Œå“ªäº›é”™è¯¯ä¸éœ€è¦ä¸ŠæŠ¥ã€‚</p><ul><li><code>ignoreErrors</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨æˆ–æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„æ¸…å•ï¼Œç”¨äºåŒ¹é…ä¸åº”å‘é€åˆ° Sentry çš„é”™è¯¯æ¶ˆæ¯ã€‚ä¸è¿™äº›å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ¶ˆæ¯å°†åœ¨å‘é€åˆ° Sentry ä¹‹å‰è¢«è¿‡æ»¤æ‰ã€‚ä½¿ç”¨å­—ç¬¦ä¸²æ—¶ï¼Œéƒ¨åˆ†åŒ¹é…å°†è¢«è¿‡æ»¤æ‰ï¼Œå› æ­¤å¦‚æœéœ€è¦æŒ‰ç²¾ç¡®åŒ¹é…è¿›è¡Œè¿‡æ»¤ï¼Œè¯·æ”¹ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”™è¯¯éƒ½ä¼šè¢«å‘é€ã€‚</li><li><code>ignoreTransactions</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„åˆ—è¡¨ï¼Œç”¨äºåŒ¹é…ä¸åº”è¯¥å‘é€åˆ° Sentry çš„äº¤æ˜“åç§°ã€‚</li><li><code>denyUrls</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„åˆ—è¡¨ï¼Œç”¨äºåŒ¹é…ä¸åº”è¯¥å‘é€åˆ° Sentry çš„é”™è¯¯ Urlsã€‚å¦‚æœæ‚¨å°† <code>&#39;foo.com&#39;</code> æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œå®ƒä¹Ÿä¼šåŒ¹é… <code>https://bar.com/myfile/foo.com</code></li><li><code>allowUrls</code>ï¼šä¸<code>denyUrls</code>ç›¸åã€‚</li><li><code>beforeSend</code>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªå¼‚å¸¸ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯é€‰çš„å¼‚å¸¸å¯¹è±¡æˆ– nullã€‚å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼ŒSentry å°†ä½¿ç”¨å®ƒæ¥ä»£æ›¿åŸå§‹å¼‚å¸¸ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å› nullï¼ŒSentry å°†å¿½ç•¥è¿™ä¸ªå¼‚å¸¸ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>beforeSend</code>å‡½æ•°æ¥è¿‡æ»¤å¼‚å¸¸ã€ä¿®æ”¹å¼‚å¸¸ä¿¡æ¯æˆ–æ·»åŠ è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li><li><code>sampleRate</code>ï¼šä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºå¼‚å¸¸ä¸ŠæŠ¥çš„é‡‡æ ·ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†<code>sampleRate</code>è®¾ç½®ä¸º 0.5ï¼ŒSentry å°†ä»…å¯¹ 50%çš„å¼‚å¸¸è¿›è¡Œä¸ŠæŠ¥ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥å¸®åŠ©ä½ æ§åˆ¶å¼‚å¸¸ä¸ŠæŠ¥çš„æ•°é‡ï¼Œå°¤å…¶æ˜¯åœ¨å¼‚å¸¸é¢‘ç‡å¾ˆé«˜çš„æƒ…å†µä¸‹ã€‚</li></ul><h4 id="æ‰‹åŠ¨æ•è·å¼‚å¸¸" tabindex="-1">æ‰‹åŠ¨æ•è·å¼‚å¸¸ <a class="header-anchor" href="#æ‰‹åŠ¨æ•è·å¼‚å¸¸" aria-label="Permalink to &quot;æ‰‹åŠ¨æ•è·å¼‚å¸¸&quot;">â€‹</a></h4><p>å¦‚æœç¼–å†™äº† try/catch è€Œä¸é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¯¥å¼‚å¸¸å°†æ°¸è¿œä¸ä¼šå‡ºç°åœ¨ Sentryï¼Œé™¤éæ‰‹åŠ¨æ•è·ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#6A737D;">// å¼‚å¸¸æ‰‹åŠ¨æ•è·</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">aFunctionThatMightFail</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Sentry.</span><span style="color:#B392F0;">captureException</span><span style="color:#E1E4E8;">(err);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h4 id="ä¸Šä¼ æ—¥å¿—ä¿¡æ¯" tabindex="-1">ä¸Šä¼ æ—¥å¿—ä¿¡æ¯ <a class="header-anchor" href="#ä¸Šä¼ æ—¥å¿—ä¿¡æ¯" aria-label="Permalink to &quot;ä¸Šä¼ æ—¥å¿—ä¿¡æ¯&quot;">â€‹</a></h4><p>æœ‰æ—¶æˆ‘ä»¬ä¸ä»…ä»…è¦æ”¶é›†å¼‚å¸¸ä¿¡æ¯ï¼Œè¿˜éœ€è¦åœ¨é¡µé¢ä¸­æ‰“ log æ¥æ”¶é›†é¡µé¢è¿è¡Œæ•°æ®ã€‚é€šå¸¸ä¸ä¼šå‘å‡ºæ¶ˆæ¯ï¼Œä½†å®ƒä»¬å¯¹æŸäº›å›¢é˜Ÿå¾ˆæœ‰ç”¨ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> Sentry </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@sentry/vue&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">captureMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;this is a debug message&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;debug&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><blockquote><p>å¯ç”¨çº§åˆ«ä¸º <code>&quot;fatal&quot;</code> ã€ <code>&quot;critical&quot;</code> ã€ <code>&quot;error&quot;</code> ã€ <code>&quot;warning&quot;</code> ã€ <code>&quot;log&quot;</code> ã€ <code>&quot;info&quot;</code> å’Œ <code>&quot;debug&quot;</code> ã€‚</p></blockquote><h2 id="sentry-error-é”™è¯¯åˆ†æ" tabindex="-1">Sentry Error é”™è¯¯åˆ†æ <a class="header-anchor" href="#sentry-error-é”™è¯¯åˆ†æ" aria-label="Permalink to &quot;Sentry Error é”™è¯¯åˆ†æ&quot;">â€‹</a></h2><p>ç¬¬ä¸€ç§é”™è¯¯æˆ‘ä»¬èƒ½ä¸€çœ¼çœ‹å‡ºï¼Œæ¯”å¦‚ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">Uncaught (in promise) SyntaxError: Expected &#39;,&#39; or &#39;}&#39; after property value in JSON at position 6</span></span></code></pre></div><p>è¿™ä¸ªé”™è¯¯å°±æ˜¯ä½¿ç”¨<code>JSON.parse</code>è§£æå­—ç¬¦ä¸²æ—¶ï¼Œå­—ç¬¦ä¸²çš„æ ¼å¼ä¸å¯¹ï¼Œå¯¼è‡´çš„é”™è¯¯ã€‚</p><p>ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ sentry ä¸­å‘Šè¯‰ä½ çš„<code>æ–‡ä»¶è·¯å¾„</code>ï¼Œæˆ–è€…<code>è·¯ç”±åœ°å€</code>ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œæœ€åè§£å†³é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€äº›é”™è¯¯å¯èƒ½æ²¡æœ‰æ–‡ä»¶è·¯å¾„ï¼Œé€šè¿‡è·¯ç”±åœ°å€åˆ™å¤ªè¿‡å®½æ³›äº†ï¼Œä¸å¥½å¯¹åº”åˆ°é”™è¯¯çš„å…·ä½“ä½ç½®ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>é¢åŒ…å±‘ï¼ˆæ“ä½œæ­¥éª¤ï¼‰</code>æ¥æ‰¾åˆ°é”™è¯¯çš„ä½ç½®ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">Non-Error promise rejection captured with keys: remark</span></span></code></pre></div><p>é€šè¿‡æœç´¢ï¼Œå¾—åˆ°è¿™ä¸ªé”™è¯¯çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#e1e4e8;">è¿™ä¸ªé”™è¯¯è¡¨ç¤ºæŸä¸ª Promise è¢«æ‹’ç»äº†ï¼Œä½†æ˜¯è¢«æ‹’ç»çš„å€¼ä¸æ˜¯ä¸€ä¸ª Error å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªé Error ç±»å‹çš„å€¼ã€‚</span></span>
<span class="line"><span style="color:#e1e4e8;">é€šå¸¸æƒ…å†µä¸‹ï¼ŒPromise è¢«æ‹’ç»æ—¶åº”è¯¥è¿”å›ä¸€ä¸ª Error å¯¹è±¡ï¼Œä»¥ä¾¿è°ƒç”¨è€…èƒ½å¤Ÿè¯†åˆ«å’Œå¤„ç†é”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#e1e4e8;">ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒPromise è¢«æ‹’ç»çš„å€¼ä¸æ˜¯ä¸€ä¸ª Errorï¼Œè€Œæ˜¯ä¸€ä¸ªå…·æœ‰é”®ä¸º &quot;remark&quot; çš„å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">è¿™ä¸ªé”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨ä»£ç ä¸­æ²¡æœ‰æ­£ç¡®å¤„ç† Promise çš„é”™è¯¯å¤„ç†ç¨‹åºæ—¶ã€‚</span></span>
<span class="line"><span style="color:#e1e4e8;">è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦ç¡®ä¿ä½ çš„ Promise é“¾ä¸­çš„æ¯ä¸ª Promise éƒ½æœ‰ä¸€ä¸ªé”™è¯¯å¤„ç†ç¨‹åºï¼Œ</span></span>
<span class="line"><span style="color:#e1e4e8;">å¹¶ä¸”åœ¨å¤„ç†ç¨‹åºä¸­è¿”å›ä¸€ä¸ª Error å¯¹è±¡ã€‚ä½ è¿˜å¯ä»¥æ£€æŸ¥è¢«æ‹’ç»çš„å€¼æ˜¯å¦ç¬¦åˆé¢„æœŸçš„ç±»å‹ï¼Œå¹¶ç›¸åº”åœ°è¿›è¡Œå¤„ç†ã€‚</span></span></code></pre></div><p>çœ‹å®Œï¼Œè¿˜æ˜¯ä¸çŸ¥é“æ˜¯ä»€ä¹ˆé”™è¯¯ï¼Œäºæ˜¯é€šè¿‡é¢åŒ…å±‘ï¼Œé‡ç°é”™è¯¯å‘ç”Ÿçš„è¿‡ç¨‹ï¼š</p><p><img src="`+c+`" alt=""></p><p>ä»è€Œå®šä½åˆ°äº†å‡½æ•°çš„ä½ç½®ï¼Œä¸‹é¢ä¸ºè°ƒç”¨çš„å‡½æ•°ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">async </span><span style="color:#B392F0;">fileUpload</span><span style="color:#E1E4E8;">(file) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.submitLoading </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.loadingUpImg </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">params</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">FormData</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        params.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;image&quot;</span><span style="color:#E1E4E8;">, file.raw);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> apis.device.</span><span style="color:#B392F0;">apifileUpImage</span><span style="color:#E1E4E8;">(params);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.loadingUpImg </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.submitLoading </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(data);</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(error);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.loadingUpImg </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.submitLoading </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">reject</span><span style="color:#E1E4E8;">(error);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span></code></pre></div><p>ç„¶è€Œçœ‹äº†åŠå¤©ï¼Œä¾ç„¶æ²¡æœ‰å‘ç°æœ‰ä»€ä¹ˆé—®é¢˜ã€‚æœ€åï¼Œæˆ‘é€šè¿‡é—®æˆ‘çš„ç§äººåŠ©ç† ChatGPT å¾—åˆ°äº†ç­”æ¡ˆã€‚</p><p>æˆ‘è®©å®ƒå¸®æˆ‘çœ‹ä¸‹è¿™ä¸ªä»£ç æ˜¯å¦ä¼šå‡ºç°<code>Non-Error promise rejection captured</code>çš„é”™è¯¯ï¼ŒChatGPT çš„å›ç­”å¦‚ä¸‹ï¼š</p><p>æ ¹æ®æä¾›çš„ä»£ç ï¼ŒfileUpload å‡½æ•°ä¼¼ä¹æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å¼‚æ­¥å‡½æ•°ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸Šä¼ ã€‚å®ƒå°†ä¸¤ä¸ªåŠ è½½æ ‡å¿—è®¾ç½®ä¸º trueï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ FormData å¯¹è±¡ï¼Œå°†åŸå§‹æ–‡ä»¶æ•°æ®é™„åŠ åˆ°å…¶ä¸­ï¼Œç„¶åè°ƒç”¨å¼‚æ­¥ API å‡½æ•°ä¸Šä¼ å›¾åƒã€‚ä¸Šä¼ å®Œæˆåï¼Œå°†åŠ è½½æ ‡å¿—è®¾ç½®ä¸º falseï¼Œå¹¶ä½¿ç”¨ä¸Šä¼ çš„æ•°æ®è¿”å›å·²è§£å†³çš„ Promiseã€‚ </p><p>å¦‚æœå‡ºç°é”™è¯¯ï¼Œå‡½æ•°ä¼šæ•è·å®ƒï¼Œå°†å…¶è®°å½•åˆ°æ§åˆ¶å°ä¸­ï¼Œå°†åŠ è½½æ ‡å¿—è®¾ç½®ä¸º falseï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸¦æœ‰é”™è¯¯çš„æ‹’ç» Promiseã€‚ </p><p>å…³äºæ‚¨å…³äºâ€œ<code>Non-Error promise rejection captured</code>â€çš„é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨é Error å€¼è°ƒç”¨ Promise.reject()æ–¹æ³•ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿæ­¤é”™è¯¯ã€‚å¦‚æœ catch å—è¿”å›ä¸æ˜¯ Error ç±»çš„å®ä¾‹çš„å€¼ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ </p><p>ä¸ºé¿å…æ­¤é”™è¯¯ï¼Œå»ºè®®å§‹ç»ˆåœ¨ catch å—ä¸­æŠ›å‡º Error ç±»çš„å®ä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(error);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.loadingUpImg </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.submitLoading </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">(error);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><p>äºæ˜¯ï¼Œé—®é¢˜è§£å†³ã€‚</p><div class="tip custom-block"><p class="custom-block-title"><strong>æ€»ç»“å…³äºé”™è¯¯çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li>é¦–å…ˆçœ‹é”™è¯¯æç¤ºï¼Œæ˜¯å¦ä¸€çœ¼çœ‹å‡ºé”™è¯¯é—®é¢˜ï¼Œä¸èƒ½çš„å…ˆå»æœç´¢ä¸€ä¸‹</li><li>ç„¶åæ‰¾åˆ°é”™è¯¯æ‰€åœ¨çš„<code>æ–‡ä»¶åç§°</code>ï¼ˆå¦‚æœä¸Šä¼ äº† sourcemap åˆ™æ›´æ¸…æ™°ï¼‰</li><li>å¦‚æœæ²¡æœ‰æ–‡ä»¶æ˜¾ç¤ºï¼Œåˆ™é€šè¿‡<code>è·¯ç”±åœ°å€</code>æ‰¾åˆ°å¤§æ¦‚çš„èŒƒå›´ï¼Œå†é€šè¿‡<code>é¢åŒ…å±‘</code>æ‰¾åˆ°å…·ä½“çš„å¤ç°è¿‡ç¨‹ã€‚</li></ul></div><h2 id="sentry-performance-æ€§èƒ½åˆ†æ" tabindex="-1">Sentry Performance æ€§èƒ½åˆ†æ <a class="header-anchor" href="#sentry-performance-æ€§èƒ½åˆ†æ" aria-label="Permalink to &quot;Sentry Performance æ€§èƒ½åˆ†æ&quot;">â€‹</a></h2><p>åœ¨ä½¿ç”¨ <code>Sentry</code> åšæ€§èƒ½ç›‘æ§æ—¶ï¼Œæœ‰ä¸‰ä¸ªéå¸¸å…³é”®çš„ç¯èŠ‚ï¼š</p><ul><li>æ”¶é›†æ€§èƒ½æŒ‡æ ‡æ•°æ®</li><li>å¯¹æ€§èƒ½æŒ‡æ ‡æ•°æ®åšåˆ†æ</li><li>æ ¹æ®åˆ†æç»“æœåšä¼˜åŒ–</li></ul><p>æœ‰äº†è¿™ä¸‰ä¸ªç¯èŠ‚ï¼Œæ€§èƒ½ç›‘æ§æ‰èƒ½ç®—æ˜¯æœ‰äº†ä¸€æ¡ç›¸å¯¹å®Œæ•´çš„é“¾è·¯ã€‚</p><h3 id="åŠŸèƒ½ä»‹ç»" tabindex="-1">åŠŸèƒ½ä»‹ç» <a class="header-anchor" href="#åŠŸèƒ½ä»‹ç»" aria-label="Permalink to &quot;åŠŸèƒ½ä»‹ç»&quot;">â€‹</a></h3><p><code>Sentry</code> åœ¨ä¸ŠæŠ¥æ€§èƒ½æŒ‡æ ‡æ•°æ®æ—¶ï¼Œä¼šæŠŠæ•°æ®åˆ†ä¸ºé¦–å± - <code>pageload</code> å’Œé¡µé¢åˆ‡æ¢ - <code>navigation</code> ä¸¤ç±»ã€‚ï¼ˆåˆ†åˆ«å¯¹åº”ä¸‹é¢çš„<code>Web Vitals</code>å’Œ<code>Frontend</code>ä¸¤å¤§æ¨¡å—ï¼‰ã€‚</p><p>åœ¨æ€§èƒ½é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘æ§æ¯ä¸€ç¬”äº¤æ˜“çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>ä¸€ç¬”äº¤æ˜“è¡¨ç¤ºæ‚¨è¦æµ‹é‡æˆ–è·Ÿè¸ªçš„æ´»åŠ¨çš„å•ä¸ªå®ä¾‹ï¼Œä¾‹å¦‚<code>é¡µé¢é¦–æ¬¡åŠ è½½</code>ã€<code>é¡µé¢åˆ‡æ¢å¯¼èˆª</code>æˆ–<code>å¼‚æ­¥ä»»åŠ¡</code>ã€‚</p><blockquote><p><strong>äº¤æ˜“æ˜¯æ€§èƒ½åˆ†æçš„åŸºæœ¬å•ä½ï¼Œæ‰€æœ‰çš„åˆ†æéƒ½æ˜¯å›´ç»•äº¤æ˜“è¿›è¡Œçš„ã€‚</strong></p></blockquote><p>ä¸‹é¢æ˜¯å„ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼š</p><ul><li><code>trends view</code> ï¼šè¶‹åŠ¿è§†å›¾æ˜¾ç¤ºäº†éšç€æ—¶é—´çš„æ¨ç§»å…¶åŠ è½½æ—¶é—´å‘ç”Ÿé‡å¤§å˜åŒ–çš„äº¤æ˜“ã€‚å½“æ‚¨æœ‰å¤§é‡äº¤æ˜“æ—¶ï¼Œæ­¤è§†å›¾éå¸¸é€‚åˆæä¾›è§è§£ã€‚</li><li><code>äº¤æ˜“è¯¦æƒ…</code>ï¼šç‚¹å‡»ä¸€ä¸ªäº¤æ˜“è¿›å…¥äº¤æ˜“è¯¦æƒ…ã€‚æ¯ç¬”äº¤æ˜“éƒ½æœ‰ä¸€ä¸ªæ‘˜è¦è§†å›¾ï¼Œå¯è®©æ‚¨æ›´å¥½åœ°äº†è§£å…¶æ•´ä½“å¥åº·çŠ¶å†µã€‚é€šè¿‡æ­¤è§†å›¾ï¼Œæ‚¨å°†æ‰¾åˆ°å›¾è¡¨ã€è¿™äº›äº‹ä»¶çš„å®ä¾‹ã€ç»Ÿè®¡ä¿¡æ¯ã€æ–¹é¢åœ°å›¾ã€ç›¸å…³é”™è¯¯ç­‰ã€‚</li><li><code>Web Vitals</code>ï¼šGoogle å®šä¹‰çš„ä¸€ç»„å‰ç«¯æ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„ FCPï¼ŒLCP ç­‰ã€‚</li><li><code>Frontend</code>ï¼šåŒ…æ‹¬æ‰€æœ‰å‰ç«¯äº¤æ˜“ï¼Œä¸ä»…åŒ…å« Web Vitalsï¼Œè¿˜æœ‰é¡µé¢è°ƒæ•´åé¡µé¢åŠ è½½çš„æ€§èƒ½ã€‚</li><li><code>Backend</code>ï¼šå¼ºè°ƒæŒç»­æ—¶é—´ã€ååé‡ã€æ•…éšœç‡å’Œ Apdexã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨é€‰æ‹©äº†å‰ç«¯é¡¹ç›®ï¼Œæ­¤æ¨¡å¼è¿˜ä¼šæ˜¾ç¤ºæ‰€æœ‰å‰ç«¯äº‹åŠ¡ã€‚</li></ul><h3 id="æ€§èƒ½æŒ‡æ ‡" tabindex="-1">æ€§èƒ½æŒ‡æ ‡ <a class="header-anchor" href="#æ€§èƒ½æŒ‡æ ‡" aria-label="Permalink to &quot;æ€§èƒ½æŒ‡æ ‡&quot;">â€‹</a></h3><p>ä¸€äº›å¸¸è§çš„æ€§èƒ½æ•°æ®æŒ‡æ ‡æœ‰å¦‚ä¸‹ä¸€äº›ï¼š</p><ul><li><code>TPM</code>: æ¯åˆ†é’Ÿäº‹åŠ¡æ•°ï¼›</li><li><code>FCP</code>ï¼šé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆåœ¨é¡µé¢ä¸Šç¬¬ä¸€æ¬¡å‡ºç°ä»»ä½•è§†è§‰å†…å®¹çš„æ—¶é—´ã€‚è¿™å¯èƒ½æ˜¯æ–‡æœ¬ï¼Œå›¾åƒï¼ŒSVG ç­‰ã€‚ï¼‰ï¼›é¡µé¢ä¸Šç¬¬ä¸€ä¸ªå†…å®¹å…ƒç´ ï¼ˆæ¯”å¦‚æ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰è¢«æ¸²æŸ“å‡ºæ¥çš„æ—¶é—´ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·å¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šæœ‰å†…å®¹çš„æ—¶é—´ã€‚å› æ­¤ï¼ŒFCP æ˜¯è¡¡é‡ç½‘é¡µåŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒçš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ï¼Œé€šå¸¸è¢«ç”¨æ¥è¡¨ç¤ºé¡µé¢çš„é¦–å±åŠ è½½æ—¶é—´ã€‚</li><li><code>LCP</code>ï¼šæœ€å¤§å†…å®¹æ¸²æŸ“ï¼ˆé¡µé¢å¼€å§‹åŠ è½½åˆ°ä¸»è¦å†…å®¹å…ƒç´ åœ¨è§†å£ä¸­å‘ˆç°çš„æ—¶é—´ï¼‰ï¼›</li><li><code>FID</code>ï¼šç”¨æˆ·é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼Œå¯ä»¥è¡¡é‡ç”¨æˆ·é¦–æ¬¡ä¸ç½‘ç«™äº¤äº’çš„æ—¶é—´ï¼›</li><li><code>TTFB</code>ï¼šé¦–å­—èŠ‚æ—¶é—´ï¼Œæµ‹é‡ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶é¡µé¢çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´ï¼ˆå¯ä»¥åˆ¤æ–­ç¼“æ…¢æ¥è‡ªç½‘ç»œè¯·æ±‚è¿˜æ˜¯é¡µé¢åŠ è½½é—®é¢˜ï¼‰ï¼›</li><li><code>TTI</code>ï¼šå¯äº¤äº’æ—¶é—´ï¼Œç”¨äºæµ‹é‡é¡µé¢ä»å¼€å§‹åŠ è½½åˆ°ä¸»è¦èµ„æºå®Œæˆæ¸²æŸ“ï¼Œå¹¶èƒ½å¤Ÿå¿«é€Ÿã€å¯é åœ°å“åº”ç”¨æˆ·è¾“å…¥æ‰€éœ€çš„æ—¶é—´, å€¼è¶Šå°çº¦å¥½ã€‚</li><li><code>CLS</code>ï¼šé¡µé¢è§†è§‰æ˜¯å¦æœ‰ç¨³å®šã€‚ç”¨äºæµ‹é‡æ•´ä¸ªé¡µé¢ç”Ÿå‘½å‘¨æœŸå†…å‘ç”Ÿçš„æ‰€æœ‰æ„å¤–å¸ƒå±€åç§»ä¸­æœ€å¤§ä¸€è¿ä¸²çš„å¸ƒå±€åç§»æƒ…å†µã€‚å€¼è¶Šå°ï¼Œè¡¨ç¤ºé¡µé¢è§†è§‰è¶Šç¨³å®šã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸€å¼ å›¾è¿›è¡Œå½¢è±¡è¯´æ˜ï¼š</p><p><img src="`+r+'" alt=""></p><p>Sentry ä¸­çš„æ€§èƒ½æ•°æ®æŒ‡æ ‡æœ‰å¦‚ä¸‹è¿™äº›ï¼š</p><ul><li><code>p75 FID</code>ï¼šä¸€ç§è¡¡é‡ LCP æ€§èƒ½çš„åº¦é‡ï¼Œå®ƒè¡¨ç¤ºé’ˆå¯¹æ‰€æœ‰è¯·æ±‚ï¼ŒLCP å€¼æ’åç¬¬ 75% çš„è¯·æ±‚æ‰€éœ€çš„æ—¶é—´ã€‚å…¶ä»– p50ï¼Œp95 éƒ½æ˜¯ç±»ä¼¼çš„ã€‚ä¾‹å¦‚ï¼Œ<code>FID</code> å¹³å‡æ—¶é—´ä¸º <code>150ms</code>ï¼Œ <code>P50</code> ä¸º <code>29.61ms</code>ï¼Œ <code>P75</code> ä¸º <code>169ms</code>ï¼Œ <code>P95</code> ä¸º <code>600ms</code>ã€‚è¿™è¡¨ç¤ºæˆ‘ä»¬çš„é¦–å± <code>FID</code> è€—æ—¶ï¼Œ50% åœ¨ <code>30</code> ms ä»¥å†…ï¼Œ50% åœ¨ <code>30ms</code> ä»¥å¤–ï¼›75%åœ¨ <code>170ms</code> ä»¥å†…ï¼Œ25% åœ¨ <code>170ms</code> ä»¥å¤–ï¼›95% åœ¨ <code>600 ms</code> ä»¥å†…ï¼Œ5% åœ¨ <code>600 ms</code> ä»¥å¤–ã€‚</li><li><code>User Misery</code>ï¼šç”¨æˆ·ç—›è‹¦åº¦ï¼Œæ˜¯ä¸€ç§è¡¡é‡åº”ç”¨ç¨‹åºç”¨æˆ·ä½“éªŒçš„æŒ‡æ ‡ã€‚å€¼è¶Šå¤§ï¼Œè¡¨ç¤ºç”¨æˆ·ä½“éªŒè¶Šå·®ã€‚</li><li><code>Transactions Per Minuteï¼ˆTPMï¼‰</code>ï¼šè¡¡é‡åº”ç”¨ç¨‹åºäº¤æ˜“å¤„ç†é€Ÿåº¦çš„æŒ‡æ ‡ï¼Œé€šå¸¸æ˜¯æŒ‡æ¯åˆ†é’Ÿå®Œæˆçš„äº‹åŠ¡æ•°é‡ï¼Œå…¶ä¸­äº‹åŠ¡å¯ä»¥æ˜¯ç”¨æˆ·è¯·æ±‚ã€API è°ƒç”¨æˆ–å…¶ä»–ç±»å‹çš„æ“ä½œã€‚</li></ul><h3 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1">å¦‚ä½•ä½¿ç”¨ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨" aria-label="Permalink to &quot;å¦‚ä½•ä½¿ç”¨&quot;">â€‹</a></h3><p>æˆ‘ä»¬ä¸»è¦å…³æ³¨çš„å°±æ˜¯ä¸Šé¢æåˆ°çš„å¸¸è§çš„æ€§èƒ½æ•°æ®æŒ‡æ ‡ï¼ŒåŒ…æ‹¬<code>FCP</code>ï¼Œ<code>LCP</code>ç­‰ã€‚</p><p>åœ¨ Web Vitals ç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰é¡µé¢é¦–æ¬¡åŠ è½½çš„æ—¶é—´ã€‚å¦‚æœè¿‡é•¿ï¼Œå¯ä»¥è¿›å…¥äº¤æ˜“è¯¦æƒ…è¿›è¡Œåˆ†æã€‚</p><p><img src="'+E+'" alt=""></p><p>æ¯”å¦‚æˆ‘ä»¬å¸¸è¯´çš„â€œé¡µé¢ç§’å¼€â€æŒ‡æ ‡ï¼Œå°±å¯ä»¥åœ¨ Web Vitals ç•Œé¢æ‰¾åˆ°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé¡µé¢ç§’å¼€æŒ‡çš„å°±æ˜¯ FCPã€‚</p><blockquote><p>å…³äºå¦‚ä½•è¯„åˆ¤ <code>FCP</code>ã€<code>LCP</code>ã€<code>FID</code>ã€<code>CLS</code> è¡¨ç°çš„ä¼˜åŠ£ï¼Œ<code>Sentry</code> æä¾›äº†æ ‡å‡†:</p></blockquote><p><img src="'+i+'" alt=""></p><p>ç‚¹è¿›å»åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›é¦–å±æŒ‰ç…§ç”¨æ—¶é•¿åº¦é™åºæ’åˆ—ï¼š</p><p><img src="'+y+'" alt=""></p><p>ç‚¹å‡»å…¶ä¸­ä¸€ä¸ª Event IDï¼Œå¯ä»¥çœ‹åˆ°å…·ä½“çš„å„ä¸ªéƒ¨åˆ†çš„èŠ±è´¹æ—¶é•¿ï¼Œæ¯”å¦‚ http è¯·æ±‚ï¼Œèµ„æºè¯·æ±‚ï¼Œä»¥åŠå…¶ä»–çš„ã€‚</p><p><img src="'+d+'" alt=""></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° http èŠ±è´¹çš„æ—¶é—´æœ€é•¿ï¼Œå¯ä»¥æ‰¾æ‰“å¯¹åº”çš„æ¥å£ï¼Œå‘Šè¯‰åç«¯æ”¹è¿›ï¼Œæˆ–è€…è€ƒè™‘æ˜¯å¦å› ä¸ºè¯·æ±‚è¿‡å¤šï¼›å¦‚æœæ˜¯ resource èŠ±è´¹çš„æ—¶é—´é•¿ï¼Œå¯ä»¥è€ƒè™‘å‡å°‘èµ„æºè¯·æ±‚ç­‰æ“ä½œã€‚</p><p>å‚è€ƒèµ„æ–™</p><ul><li><a href="https://www.youtube.com/watch?v=Ap5lQg7UL-s" title="Sentryçš„å®˜æ–¹æ¼”ç¤ºè§†é¢‘" target="_blank" rel="noreferrer">Sentry çš„å®˜æ–¹æ¼”ç¤ºè§†é¢‘</a>ï¼šäº†è§£ Sentry æ€§èƒ½ç›‘æ§å¦‚ä½•å¸®åŠ©æ‚¨æ‰¾åˆ°å¹¶è§£å†³æœ€å…·å½±å“åŠ›çš„æ€§èƒ½é—®é¢˜</li><li><a href="https://juejin.cn/post/7151753139052347399" title="ä½¿ç”¨ Sentry åšæ€§èƒ½ç›‘æ§ - åˆ†æä¼˜åŒ–ç¯‡" target="_blank" rel="noreferrer">ä½¿ç”¨ Sentry åšæ€§èƒ½ç›‘æ§ - åˆ†æä¼˜åŒ–ç¯‡</a>ï¼šå…³äºå„ä¸ªå›¾æ ‡è§£é‡Šçš„å¾ˆè¯¦ç»†ã€‚</li></ul><div class="tip custom-block"><p class="custom-block-title"><strong>æ€»ç»“ä¸€äº›å‰ç«¯ä¼˜åŒ–æ˜æ˜¾çš„å¤§æ–¹å‘ï¼š</strong></p><ul><li>ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯</li><li>ä¼˜åŒ–é¦–é¡µæ¥å£æ•°é‡</li><li>ä¼˜åŒ–èµ„æºåŠ è½½é€Ÿåº¦</li></ul></div><p>å¦‚æœè¿™äº›åšå¥½äº†ï¼ŒåŸºæœ¬ä¸Šå¤§çš„æ€§èƒ½é—®é¢˜å°±è§£å†³äº†ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œsentry çš„ performance è¿˜æœ‰å¾ˆå¤šæŒ‡æ ‡ï¼Œç•™ç€æ…¢æ…¢å‘æ˜å§ ğŸ˜ƒ</p><p>ï¼ˆå®Œï¼‰</p>',166)]))}const q=n(u,[["render",F]]);export{v as __pageData,q as default};
